import{k as _,d as k,r as q,q as C,f as o,o as l,a as e,g as p,t as n,e as L,p as S,b as h,w as g,i as r,s as N,h as x,A as c,F as m,j as b,c as T,n as V}from"./app-B8f33P9o.js";import{A as j}from"./AdminLayout-K6sT7w34.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"space-y-6"},B={class:"flex flex-wrap items-end gap-4 justify-between"},D={class:"flex gap-3"},M={class:"rounded-xl bg-white/[.06] ring-1 ring-white/12 px-4 py-2 text-center"},R={class:"text-xl font-extrabold"},F={class:"rounded-xl bg-bk-gold/15 ring-1 ring-bk-gold/40 px-4 py-2 text-center"},z={class:"text-xl font-extrabold text-bk-gold"},H={class:"sticky top-14 z-10"},P={class:"rounded-xl bg-white/[.06] ring-1 ring-white/12 backdrop-blur px-3 py-3 flex flex-col md:flex-row gap-3 md:items-center md:justify-between"},U={method:"get",class:"flex-1"},E={class:"relative"},I={class:"flex gap-2"},O={class:"overflow-x-auto rounded-xl border border-white/10 bg-white/[.04]"},Z={class:"min-w-full text-[13.5px]"},G={class:"px-3 py-2"},J={key:0,class:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 bg-bk-gold/15 text-bk-gold ring-1 ring-bk-gold/30 font-semibold"},K={key:1,class:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 bg-white/10 text-white/80 ring-1 ring-white/15"},Q={class:"px-3 py-2"},W={class:"font-semibold"},X={class:"text-white/55"},Y={class:"px-3 py-2 text-white/85"},$={key:0,class:"truncate"},ee={key:1,class:"truncate text-white/65"},te={class:"px-3 py-2"},se={class:"px-3 py-2"},le={class:"inline-flex items-center justify-center min-w-[2ch] rounded-md bg-white/10 ring-1 ring-white/15 px-2 py-0.5"},oe={class:"px-3 py-2 whitespace-nowrap"},ne={class:"px-3 py-2"},ie={key:0},re={key:0,class:"flex flex-wrap gap-2 justify-center"},xe=_({layout:j,__name:"Index",props:{items:{},stats:{}},setup(w){const a=w,f=k(()=>a.items.data??[]),d=q("");C(()=>{try{const i=new URLSearchParams(location.search);d.value=i.get("q")??""}catch{}});const u=(i,t,s=!1)=>N(i,t??{},s,globalThis.Ziggy),y=i=>new Date(i).toLocaleString("fr-FR",{dateStyle:"medium",timeStyle:"short"});return(i,t)=>(l(),o("div",A,[e("div",B,[t[3]||(t[3]=e("div",null,[e("h1",{class:"text-2xl md:text-3xl font-extrabold tracking-tight"},"Devis & leads"),e("div",{class:"text-white/70 text-sm"},"Sources : formulaire public « Devis express »")],-1)),e("div",D,[e("div",M,[t[1]||(t[1]=e("div",{class:"text-xs text-white/60"},"Total",-1)),e("div",R,n(a.stats.total),1)]),e("div",F,[t[2]||(t[2]=e("div",{class:"text-xs text-white/60"},"Nouveaux",-1)),e("div",z,n(a.stats.new),1)])])]),e("div",H,[e("div",P,[e("form",U,[e("div",E,[L(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),name:"q",placeholder:"Rechercher nom / email / ville…",class:"w-full h-11 rounded-lg bg-transparent ring-1 ring-white/15 focus:ring-bk-gold/60 outline-none pl-10 pr-3"},null,512),[[S,d.value]]),t[4]||(t[4]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 opacity-70"},[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18"},[e("path",{d:"M10 2a8 8 0 1 0 5.29 14.29l4.21 4.21l1.41-1.41l-4.21-4.21A8 8 0 0 0 10 2z",fill:"currentColor"})])],-1))])]),e("div",I,[h(x(c),{href:u("admin.quotes.index",{q:d.value}),class:"inline-flex items-center h-11 px-4 rounded-lg border border-white/15 hover:border-bk-gold/60"},{default:g(()=>[...t[5]||(t[5]=[r("Filtrer",-1)])]),_:1},8,["href"]),h(x(c),{href:u("admin.quotes.index"),class:"inline-flex items-center h-11 px-4 rounded-lg border border-white/15 hover:border-bk-gold/60"},{default:g(()=>[...t[6]||(t[6]=[r("Réinitialiser",-1)])]),_:1},8,["href"])])])]),e("div",O,[e("table",Z,[t[12]||(t[12]=e("thead",{class:"bg-white/[.06] text-white/70"},[e("tr",null,[e("th",{class:"px-3 py-2 text-left w-14"},"Statut"),e("th",{class:"px-3 py-2 text-left min-w-[200px]"},"Contact"),e("th",{class:"px-3 py-2 text-left min-w-[160px]"},"Coordonnées"),e("th",{class:"px-3 py-2 text-left min-w-[120px]"},"Ville"),e("th",{class:"px-3 py-2 text-left w-24"},"Pièces"),e("th",{class:"px-3 py-2 text-left min-w-[180px]"},"Reçu"),e("th",{class:"px-3 py-2 w-28"})])],-1)),e("tbody",null,[(l(!0),o(m,null,b(f.value,s=>(l(),o("tr",{key:s.id,class:"border-t border-white/10 hover:bg-white/[.04] transition"},[e("td",G,[s.status==="new"?(l(),o("span",J,[...t[7]||(t[7]=[e("span",{class:"w-1.5 h-1.5 rounded-full bg-bk-gold"},null,-1),r("Nouveau ",-1)])])):(l(),o("span",K,"Lu"))]),e("td",Q,[e("div",W,n(s.name),1),e("div",X,n(s.id),1)]),e("td",Y,[s.email?(l(),o("div",$,[t[8]||(t[8]=e("span",{class:"opacity-70"},"✉︎",-1)),r(" "+n(s.email),1)])):p("",!0),s.phone?(l(),o("div",ee,[t[9]||(t[9]=e("span",{class:"opacity-70"},"☎︎",-1)),r(" "+n(s.phone),1)])):p("",!0)]),e("td",te,n(s.city??"—"),1),e("td",se,[e("span",le,n(s.files),1)]),e("td",oe,n(y(s.created_at)),1),e("td",ne,[h(x(c),{href:u("admin.quotes.show",s.id),class:"inline-flex items-center gap-1 px-3 h-9 rounded-lg border border-white/15 hover:border-bk-gold/60"},{default:g(()=>[...t[10]||(t[10]=[r(" Ouvrir ",-1)])]),_:2},1032,["href"])])]))),128)),f.value.length?p("",!0):(l(),o("tr",ie,[...t[11]||(t[11]=[e("td",{colspan:"7",class:"px-3 py-10 text-center text-white/70"},"Aucune demande pour le moment.",-1)])]))])])]),(a.items.links||[]).length?(l(),o("nav",re,[(l(!0),o(m,null,b(a.items.links,(s,v)=>(l(),T(x(c),{key:v,href:s.url||"#",class:V(["px-3 py-1.5 rounded-lg border transition",s.active?"bg-bk-gold text-bk-night border-transparent":"border-white/15 hover:border-bk-gold/60"]),innerHTML:s.label,"preserve-state":""},null,8,["href","class","innerHTML"]))),128))])):p("",!0)]))}});export{xe as default};
